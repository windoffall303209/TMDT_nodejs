<%- include('../partials/header') %>

<div class="confirmation-page" style="padding: 60px 0; background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%); min-height: 80vh;">
    <div class="container" style="max-width: 700px;">
        
        <!-- Success Message -->
        <div style="text-align: center; background: white; border-radius: 16px; padding: 50px 40px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
            <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px;">
                <span style="font-size: 40px;">‚úì</span>
            </div>
            
            <h1 style="margin: 0 0 15px 0; font-size: 28px; font-weight: 700; color: #333;">
                ƒê·∫∑t h√†ng th√†nh c√¥ng!
            </h1>
            <p style="margin: 0 0 20px 0; color: #666; font-size: 16px;">
                C·∫£m ∆°n b·∫°n ƒë√£ ƒë·∫∑t h√†ng. ƒê∆°n h√†ng c·ªßa b·∫°n ƒëang ƒë∆∞·ª£c x·ª≠ l√Ω.
            </p>
            
            <div style="display: inline-block; padding: 12px 25px; background: #f5f5f5; border-radius: 8px; margin-bottom: 30px;">
                <span style="color: #666;">M√£ ƒë∆°n h√†ng:</span>
                <strong style="color: #667eea; font-size: 18px; margin-left: 8px;"><%= order.order_code %></strong>
            </div>
        </div>
        
        <!-- Order Details -->
        <div style="background: white; border-radius: 16px; padding: 30px; margin-top: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
            <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #333; display: flex; align-items: center; gap: 10px;">
                üì¶ Chi ti·∫øt ƒë∆°n h√†ng
            </h3>
            
            <!-- Items -->
            <div style="border: 1px solid #eee; border-radius: 10px; overflow: hidden; margin-bottom: 20px;">
                <% if (order.items && order.items.length > 0) { %>
                    <% order.items.forEach((item, index) => { %>
                        <div style="display: flex; gap: 15px; padding: 15px; <%= index < order.items.length - 1 ? 'border-bottom: 1px solid #eee;' : '' %>">
                            <div style="width: 60px; height: 60px; border-radius: 8px; overflow: hidden; background: #f5f5f5; flex-shrink: 0;">
                                <% if (item.product_image) { %>
                                    <img src="<%= item.product_image %>" alt="<%= item.product_name %>" style="width: 100%; height: 100%; object-fit: cover;">
                                <% } else { %>
                                    <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">üëï</div>
                                <% } %>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 500; color: #333;"><%= item.product_name %></div>
                                <div style="color: #666; font-size: 13px; margin-top: 3px;">SL: <%= item.quantity %></div>
                            </div>
                            <div style="text-align: right; font-weight: 600; color: #d32f2f;">
                                <%= item.subtotal.toLocaleString('vi-VN') %>ƒë
                            </div>
                        </div>
                    <% }) %>
                <% } %>
            </div>
            
            <!-- Summary -->
            <div style="padding: 15px; background: #f9f9f9; border-radius: 10px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="color: #666;">T·∫°m t√≠nh:</span>
                    <span><%= order.total_amount.toLocaleString('vi-VN') %>ƒë</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="color: #666;">Ph√≠ v·∫≠n chuy·ªÉn:</span>
                    <span style="color: <%= order.shipping_fee === 0 ? '#2e7d32' : '#333' %>;"><%= order.shipping_fee === 0 ? 'Mi·ªÖn ph√≠' : order.shipping_fee.toLocaleString('vi-VN') + 'ƒë' %></span>
                </div>
                <div style="display: flex; justify-content: space-between; padding-top: 12px; border-top: 2px solid #333; margin-top: 8px;">
                    <span style="font-weight: 600; font-size: 16px;">T·ªïng c·ªông:</span>
                    <span style="font-weight: 700; font-size: 18px; color: #d32f2f;"><%= order.final_amount.toLocaleString('vi-VN') %>ƒë</span>
                </div>
            </div>
        </div>
        
        <!-- Shipping Info -->
        <div style="background: white; border-radius: 16px; padding: 30px; margin-top: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
            <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #333; display: flex; align-items: center; gap: 10px;">
                üìç ƒê·ªãa ch·ªâ giao h√†ng
            </h3>
            <div style="padding: 15px; background: #f9f9f9; border-radius: 10px;">
                <div style="font-weight: 600; color: #333;"><%= order.shipping_name %> - <%= order.shipping_phone %></div>
                <div style="color: #666; margin-top: 8px;">
                    <%= order.address_line %><%= order.ward ? ', ' + order.ward : '' %><%= order.district ? ', ' + order.district : '' %>, <%= order.city %>
                </div>
            </div>
        </div>
        
        <!-- Payment Info -->
        <div style="background: white; border-radius: 16px; padding: 30px; margin-top: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
            <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #333; display: flex; align-items: center; gap: 10px;">
                üí≥ Thanh to√°n
            </h3>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f9f9f9; border-radius: 10px;">
                <div>
                    <div style="font-weight: 500; color: #333;">
                        <% if (order.payment_method === 'cod') { %>
                            üíµ Thanh to√°n khi nh·∫≠n h√†ng (COD)
                        <% } else if (order.payment_method === 'vnpay') { %>
                            üè¶ VNPay
                        <% } else if (order.payment_method === 'momo') { %>
                            üì± V√≠ MoMo
                        <% } else { %>
                            <%= order.payment_method %>
                        <% } %>
                    </div>
                </div>
                <span style="padding: 6px 14px; border-radius: 20px; font-size: 13px; font-weight: 500; background: <%= order.payment_status === 'paid' ? '#e8f5e9' : '#fff3e0' %>; color: <%= order.payment_status === 'paid' ? '#2e7d32' : '#e65100' %>;">
                    <%= order.payment_status === 'paid' ? 'ƒê√£ thanh to√°n' : 'Ch·ªù thanh to√°n' %>
                </span>
            </div>
        </div>
        
        <!-- Status Timeline -->
        <div style="background: white; border-radius: 16px; padding: 30px; margin-top: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
            <h3 style="margin: 0 0 20px 0; font-size: 18px; color: #333; display: flex; align-items: center; gap: 10px;">
                üöö Tr·∫°ng th√°i ƒë∆°n h√†ng
            </h3>
            <div style="display: flex; align-items: center; gap: 10px; padding: 15px; background: #e3f2fd; border-radius: 10px;">
                <span style="font-size: 24px;">üìã</span>
                <div>
                    <div style="font-weight: 600; color: #1976d2;">
                        <% if (order.status === 'pending') { %>
                            ƒêang x·ª≠ l√Ω
                        <% } else if (order.status === 'confirmed') { %>
                            ƒê√£ x√°c nh·∫≠n
                        <% } else if (order.status === 'shipping') { %>
                            ƒêang giao h√†ng
                        <% } else if (order.status === 'delivered') { %>
                            ƒê√£ giao h√†ng
                        <% } else if (order.status === 'cancelled') { %>
                            ƒê√£ h·ªßy
                        <% } else { %>
                            <%= order.status %>
                        <% } %>
                    </div>
                    <div style="color: #666; font-size: 13px; margin-top: 3px;">ƒê∆°n h√†ng c·ªßa b·∫°n ƒëang ƒë∆∞·ª£c x·ª≠ l√Ω</div>
                </div>
            </div>
        </div>
        
        <!-- Actions -->
        <div style="display: flex; gap: 15px; margin-top: 30px; justify-content: center;">
            <a href="/" style="display: inline-flex; align-items: center; gap: 8px; padding: 14px 28px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: 600;">
                üè† V·ªÅ trang ch·ªß
            </a>
            <a href="/orders/history" style="display: inline-flex; align-items: center; gap: 8px; padding: 14px 28px; background: white; color: #333; text-decoration: none; border-radius: 8px; font-weight: 600; border: 2px solid #e0e0e0;">
                üìã Xem ƒë∆°n h√†ng
            </a>
        </div>
    </div>
</div>

<script src="/js/main.js"></script>

<%- include('../partials/footer') %>
