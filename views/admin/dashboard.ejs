<%- include('../partials/admin-header', { currentPage: 'dashboard' }) %>

<div class="admin-page" style="padding: 40px 20px;">
    <div class="container">
        <h1 style="margin-bottom: 40px; color: #333;">üìä Admin Dashboard</h1>
        
        <% if (stats) { %>
            <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 40px;">
                <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                    <h3 style="margin: 0 0 10px 0; opacity: 0.9; font-size: 14px; text-transform: uppercase;">T·ªïng Doanh Thu</h3>
                    <p class="stat-number" style="font-size: 32px; font-weight: 700; margin: 0;"><%= (stats.total_revenue || 0).toLocaleString('vi-VN') %>ƒë</p>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(245, 87, 108, 0.3);">
                    <h3 style="margin: 0 0 10px 0; opacity: 0.9; font-size: 14px; text-transform: uppercase;">Doanh Thu H√¥m Nay</h3>
                    <p class="stat-number" style="font-size: 32px; font-weight: 700; margin: 0;"><%= (stats.today_revenue || 0).toLocaleString('vi-VN') %>ƒë</p>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);">
                    <h3 style="margin: 0 0 10px 0; opacity: 0.9; font-size: 14px; text-transform: uppercase;">T·ªïng ƒê∆°n H√†ng</h3>
                    <p class="stat-number" style="font-size: 32px; font-weight: 700; margin: 0;"><%= stats.total_orders || 0 %></p>
                </div>
                
                <div class="stat-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(67, 233, 123, 0.3);">
                    <h3 style="margin: 0 0 10px 0; opacity: 0.9; font-size: 14px; text-transform: uppercase;">ƒê∆°n Ch·ªù X·ª≠ L√Ω</h3>
                    <p class="stat-number" style="font-size: 32px; font-weight: 700; margin: 0;"><%= stats.pending_orders || 0 %></p>
                </div>
            </div>
        <% } %>
        
        <% if (recentOrders && recentOrders.length > 0) { %>
            <div class="recent-orders" style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                <h2 style="margin: 0 0 20px 0; color: #333;">üõí ƒê∆°n H√†ng G·∫ßn ƒê√¢y</h2>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="border-bottom: 2px solid #eee;">
                            <th style="padding: 15px; text-align: left; color: #666; font-weight: 600;">M√£ ƒê∆°n</th>
                            <th style="padding: 15px; text-align: left; color: #666; font-weight: 600;">Kh√°ch H√†ng</th>
                            <th style="padding: 15px; text-align: right; color: #666; font-weight: 600;">T·ªïng Ti·ªÅn</th>
                            <th style="padding: 15px; text-align: center; color: #666; font-weight: 600;">Tr·∫°ng Th√°i</th>
                            <th style="padding: 15px; text-align: center; color: #666; font-weight: 600;">Ng√†y</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% recentOrders.forEach(order => { %>
                            <tr style="border-bottom: 1px solid #eee;">
                                <td style="padding: 15px;"><a href="/admin/orders/<%= order.id %>" style="color: #667eea; font-weight: 600;"><%= order.order_code %></a></td>
                                <td style="padding: 15px;"><%= order.user_name || 'N/A' %></td>
                                <td style="padding: 15px; text-align: right; font-weight: 600; color: #d32f2f;"><%= (order.final_amount || 0).toLocaleString('vi-VN') %>ƒë</td>
                                <td style="padding: 15px; text-align: center;">
                                    <span style="padding: 5px 12px; border-radius: 20px; font-size: 12px; background: #e3f2fd; color: #1976d2;">
                                        <%= order.status %>
                                    </span>
                                </td>
                                <td style="padding: 15px; text-align: center; color: #666;"><%= new Date(order.created_at).toLocaleDateString('vi-VN') %></td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        <% } else { %>
            <div style="text-align: center; padding: 60px; background: white; border-radius: 12px;">
                <span style="font-size: 64px;">üì≠</span>
                <h3 style="margin: 20px 0 10px 0; color: #333;">Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o</h3>
                <p style="color: #666;">H·ªá th·ªëng ƒëang ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng. ƒê∆°n h√†ng m·ªõi s·∫Ω xu·∫•t hi·ªán t·∫°i ƒë√¢y.</p>
            </div>
        <% } %>
    </div>
</div>

<%- include('../partials/admin-footer') %>
